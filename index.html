<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>donutmarket.pro</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   APPLE SF FONT STACK
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --font: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", Arial, sans-serif;
  --mono: "SF Mono", ui-monospace, "Cascadia Mono", monospace;

  /* DARK MODE (default) */
  --bg-a:    #060810;
  --bg-b:    #0a0d18;
  --bg-c:    #0d1220;

  /* Orb colors for animated bg */
  --orb1: rgba(59,130,246,.22);
  --orb2: rgba(99,102,241,.18);
  --orb3: rgba(168,85,247,.12);

  /* Glass surface */
  --glass-bg:       rgba(255,255,255,.065);
  --glass-bg-hover: rgba(255,255,255,.10);
  --glass-bg-card:  rgba(255,255,255,.06);
  --glass-border:   rgba(255,255,255,.13);
  --glass-border-strong: rgba(255,255,255,.22);
  --glass-shine:    rgba(255,255,255,.18);
  --glass-blur: 24px;

  /* Text */
  --t1: rgba(255,255,255,.95);
  --t2: rgba(255,255,255,.55);
  --t3: rgba(255,255,255,.28);

  /* Accent */
  --accent: #3b82f6;
  --accent2: #6366f1;
  --accent-a: rgba(59,130,246,.25);
  --accent-border: rgba(59,130,246,.4);
  --green: #34d399;
  --green-a: rgba(52,211,153,.2);
  --red: #f87171;
  --red-a: rgba(248,113,113,.2);
  --gold: #fbbf24;
  --gold-a: rgba(251,191,36,.2);

  /* Shadow */
  --shadow-card: 0 8px 32px rgba(0,0,0,.4), 0 2px 8px rgba(0,0,0,.3);
  --shadow-modal: 0 32px 80px rgba(0,0,0,.6), 0 8px 32px rgba(0,0,0,.4);
  --shadow-nav: 0 8px 32px rgba(0,0,0,.35), 0 1px 0 rgba(255,255,255,.06) inset;

  /* Chart */
  --chart-grid: rgba(255,255,255,.06);
  --chart-tick: rgba(255,255,255,.3);

  --r: 16px;
  --r-sm: 10px;
  --transition: all .3s cubic-bezier(.4,0,.2,1);
}

[data-theme="light"] {
  --bg-a: #e8edf5;
  --bg-b: #dce4f0;
  --bg-c: #cfd9ec;
  --orb1: rgba(59,130,246,.18);
  --orb2: rgba(99,102,241,.14);
  --orb3: rgba(168,85,247,.10);
  --glass-bg:       rgba(255,255,255,.55);
  --glass-bg-hover: rgba(255,255,255,.72);
  --glass-bg-card:  rgba(255,255,255,.5);
  --glass-border:   rgba(255,255,255,.75);
  --glass-border-strong: rgba(255,255,255,.9);
  --glass-shine:    rgba(255,255,255,.85);
  --t1: rgba(10,15,35,.92);
  --t2: rgba(10,15,35,.52);
  --t3: rgba(10,15,35,.28);
  --accent: #2563eb;
  --accent2: #4f46e5;
  --accent-a: rgba(37,99,235,.15);
  --accent-border: rgba(37,99,235,.35);
  --green: #059669;
  --green-a: rgba(5,150,105,.15);
  --red: #dc2626;
  --red-a: rgba(220,38,38,.12);
  --gold: #d97706;
  --gold-a: rgba(217,119,6,.15);
  --shadow-card: 0 8px 32px rgba(30,60,120,.1), 0 2px 8px rgba(30,60,120,.08);
  --shadow-modal: 0 32px 80px rgba(30,60,120,.2), 0 8px 32px rgba(30,60,120,.12);
  --shadow-nav: 0 8px 32px rgba(30,60,120,.12), 0 1px 0 rgba(255,255,255,.8) inset;
  --chart-grid: rgba(0,0,0,.06);
  --chart-tick: rgba(0,0,0,.38);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESET & BASE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }
body {
  font-family: var(--font);
  background: var(--bg-a);
  color: var(--t1);
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  min-height: 100vh;
  transition: background .5s ease, color .3s ease;
}
::-webkit-scrollbar { width: 3px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--glass-border); border-radius: 2px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANIMATED BACKGROUND
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#bg-canvas {
  position: fixed; inset: 0; z-index: 0;
  pointer-events: none;
  background: linear-gradient(135deg, var(--bg-a) 0%, var(--bg-b) 50%, var(--bg-c) 100%);
  transition: background .6s ease;
}
.orb {
  position: fixed; border-radius: 50%;
  pointer-events: none; z-index: 0;
  filter: blur(80px);
  will-change: transform;
  transition: opacity .6s ease;
}
.orb-1 {
  width: 800px; height: 600px;
  top: -200px; left: -200px;
  background: var(--orb1);
  animation: orbDrift1 18s ease-in-out infinite;
}
.orb-2 {
  width: 600px; height: 700px;
  top: 30%; right: -150px;
  background: var(--orb2);
  animation: orbDrift2 22s ease-in-out infinite;
}
.orb-3 {
  width: 500px; height: 500px;
  bottom: -100px; left: 30%;
  background: var(--orb3);
  animation: orbDrift3 26s ease-in-out infinite;
}
@keyframes orbDrift1 {
  0%,100%{ transform: translate(0,0) scale(1); }
  33%    { transform: translate(120px, 80px) scale(1.1); }
  66%    { transform: translate(-60px, 140px) scale(.95); }
}
@keyframes orbDrift2 {
  0%,100%{ transform: translate(0,0) scale(1); }
  40%    { transform: translate(-100px, -80px) scale(1.08); }
  70%    { transform: translate(80px, 60px) scale(.92); }
}
@keyframes orbDrift3 {
  0%,100%{ transform: translate(0,0) scale(1); }
  50%    { transform: translate(-80px, -60px) scale(1.12); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LIQUID GLASS MIXIN (via class)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur)) saturate(1.8);
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(1.8);
  border: 1px solid var(--glass-border);
  position: relative;
  overflow: hidden;
}
/* Specular top highlight â€” the key to liquid glass */
.glass::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent 0%, var(--glass-shine) 30%, var(--glass-shine) 70%, transparent 100%);
  pointer-events: none;
  z-index: 1;
}
/* Inner reflection shimmer */
.glass::after {
  content: '';
  position: absolute;
  top: 0; left: -100%; width: 60%; height: 100%;
  background: linear-gradient(105deg, transparent 40%, rgba(255,255,255,.04) 50%, transparent 60%);
  pointer-events: none;
  z-index: 1;
  transition: left .6s ease;
}
.glass:hover::after {
  left: 150%;
  transition: left .8s ease;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NAV
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#nav {
  position: fixed; top: 0; left: 0; right: 0; z-index: 900;
  padding: 12px 20px;
}
.nav-pill {
  max-width: 1300px; margin: 0 auto;
  display: flex; align-items: center; gap: 12px;
  padding: 8px 16px;
  border-radius: 50px;
  box-shadow: var(--shadow-nav);
  transition: var(--transition);
}
.logo {
  display: flex; align-items: center; gap: 9px;
  flex-shrink: 0; text-decoration: none;
}
.logo-gem {
  width: 30px; height: 30px; border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  box-shadow: 0 0 16px var(--accent-a), 0 2px 8px rgba(0,0,0,.3);
  flex-shrink: 0; overflow: hidden;
  transition: var(--transition);
}
.logo-gem:hover { transform: scale(1.08) rotate(-4deg); }
.logo-gem img { width: 22px; height: 22px; image-rendering: crisp-edges; }
.logo-txt {
  font-size: .88rem; font-weight: 700;
  letter-spacing: -.03em; color: var(--t1);
}
.logo-txt b { color: var(--accent); }

/* Search */
.nav-search { flex: 1; max-width: 320px; position: relative; }
.nav-search svg {
  position: absolute; left: 11px; top: 50%;
  transform: translateY(-50%); color: var(--t3);
  pointer-events: none; flex-shrink: 0;
}
#srch {
  width: 100%;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: 50px;
  padding: 7px 14px 7px 33px;
  color: var(--t1); font-family: var(--font); font-size: .84rem;
  outline: none; backdrop-filter: blur(10px);
  transition: var(--transition);
}
#srch::placeholder { color: var(--t3); }
#srch:focus {
  border-color: var(--accent-border);
  background: var(--glass-bg-hover);
  box-shadow: 0 0 0 3px var(--accent-a);
}

/* Theme toggle */
.theme-toggle {
  margin-left: auto;
  display: flex; align-items: center; gap: 6px;
  cursor: pointer; flex-shrink: 0;
}
.tgl-track {
  width: 44px; height: 24px;
  border-radius: 50px;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  position: relative;
  transition: var(--transition);
  cursor: pointer;
}
.tgl-track::before {
  content: '';
  position: absolute;
  width: 16px; height: 16px; border-radius: 50%;
  background: var(--accent);
  top: 3px; left: 3px;
  transition: transform .3s cubic-bezier(.34,1.56,.64,1), background .3s ease;
  box-shadow: 0 2px 6px rgba(0,0,0,.3);
}
[data-theme="light"] .tgl-track::before {
  transform: translateX(20px);
  background: var(--gold);
}
.tgl-icon { font-size: .85rem; user-select: none; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HERO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.hero {
  position: relative; z-index: 1;
  max-width: 1300px; margin: 0 auto;
  padding: 108px 28px 32px;
}
.hero-title {
  font-size: clamp(2rem, 3.5vw, 3rem);
  font-weight: 800; letter-spacing: -.05em; line-height: 1.08;
  background: linear-gradient(135deg, var(--t1) 0%, rgba(255,255,255,.7) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
}
[data-theme="light"] .hero-title {
  background: linear-gradient(135deg, var(--t1) 0%, rgba(10,15,35,.6) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
}
.hero-title em {
  font-style: normal;
  background: linear-gradient(135deg, var(--accent) 0%, var(--accent2) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONTENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.content {
  position: relative; z-index: 1;
  max-width: 1300px; margin: 0 auto;
  padding: 20px 28px 120px;
}

/* Section header */
.sec-hdr {
  display: flex; align-items: center; gap: 10px;
  margin: 44px 0 14px;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--glass-border);
  opacity: 0; transform: translateY(12px);
}
.sec-hdr:first-child { margin-top: 0; }
.sec-name {
  font-size: .92rem; font-weight: 700;
  letter-spacing: -.025em; color: var(--t1);
}
.sec-ct {
  font-size: .65rem; font-family: var(--mono);
  color: var(--t3); padding: 2px 8px;
  border-radius: 50px;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  margin-left: auto;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ITEM GRID
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(182px, 1fr));
  gap: 10px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ITEM CARD â€” Liquid Glass
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.card {
  border-radius: var(--r);
  padding: 14px 14px 12px;
  cursor: pointer;
  opacity: 0; transform: translateY(20px) scale(.98);
  will-change: transform, opacity;
  box-shadow: var(--shadow-card);
  transition: border-color .2s ease, box-shadow .3s ease, transform .3s cubic-bezier(.34,1.4,.64,1);
}
.card:hover {
  border-color: var(--accent-border) !important;
  box-shadow: 0 16px 48px rgba(59,130,246,.15), 0 4px 16px rgba(0,0,0,.3), 0 0 0 1px var(--accent-border);
  transform: translateY(-5px) scale(1.02) !important;
}
.card:active { transform: translateY(-2px) scale(1.01) !important; }

.card-top { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; }
.cimg {
  width: 44px; height: 44px; border-radius: 10px;
  background: var(--glass-bg); border: 1px solid var(--glass-border);
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0; overflow: hidden;
  transition: var(--transition);
  box-shadow: 0 2px 8px rgba(0,0,0,.2) inset;
}
.cimg img {
  width: 34px; height: 34px;
  image-rendering: crisp-edges; object-fit: contain;
  transition: transform .35s cubic-bezier(.34,1.56,.64,1);
}
.card:hover .cimg img { transform: scale(1.22) rotate(-6deg); }

.cname {
  font-size: .82rem; font-weight: 600;
  letter-spacing: -.015em; line-height: 1.3;
  color: var(--t1); word-break: break-word;
}
.cid {
  font-size: .61rem; font-family: var(--mono);
  color: var(--t3); margin-top: 2px;
  overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
}
.cprice {
  font-size: 1.08rem; font-weight: 700;
  font-family: var(--mono); color: var(--t1);
  letter-spacing: -.025em; line-height: 1;
}
.cp64 {
  font-size: .68rem; font-family: var(--mono);
  color: var(--t3); margin-top: 3px;
}
.cp64 b { color: var(--gold); }

/* Sparkline */
.sp-wrap { height: 32px; margin: 10px 0 7px; position: relative; }
.sp-wrap canvas {
  position: absolute; inset: 0;
  width: 100%!important; height: 32px!important;
}

/* Bottom row */
.cbot {
  display: flex; align-items: center; justify-content: space-between;
}
.cchg {
  display: inline-flex; align-items: center; gap: 3px;
  font-size: .68rem; font-weight: 600; font-family: var(--mono);
  padding: 2px 8px; border-radius: 50px; border: 1px solid;
}
.cchg.up { background: var(--green-a); color: var(--green); border-color: rgba(52,211,153,.3); }
.cchg.dn { background: var(--red-a);   color: var(--red);   border-color: rgba(248,113,113,.3); }
.cchg.fl { background: var(--glass-bg); color: var(--t3); border-color: var(--glass-border); }

.csrc { display: flex; align-items: center; gap: 3px; }
.spill {
  font-size: .59rem; font-weight: 600; font-family: var(--mono);
  padding: 2px 7px; border-radius: 50px; border: 1px solid;
}
.spill.a { color: var(--gold); border-color: rgba(251,191,36,.35); background: var(--gold-a); }
.spill.o { color: var(--accent); border-color: var(--accent-border); background: var(--accent-a); }
.spill.e { color: var(--t3); border-color: var(--glass-border); background: var(--glass-bg); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODAL BACKDROP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#mbg {
  position: fixed; inset: 0; z-index: 980;
  display: none; align-items: center; justify-content: center;
  padding: 16px;
}
#mbg.open { display: flex; }
.mbg-blur {
  position: absolute; inset: 0;
  background: rgba(0,0,0,0);
  backdrop-filter: blur(0px);
  transition: background .3s ease, backdrop-filter .3s ease;
}
#mbg.open .mbg-blur {
  background: rgba(0,0,0,.45);
  backdrop-filter: blur(16px);
}
[data-theme="light"] #mbg.open .mbg-blur {
  background: rgba(15,25,60,.2);
}

/* Modal Box â€” premium liquid glass */
.mbox {
  position: relative; z-index: 1;
  width: 100%; max-width: 640px;
  max-height: 88vh; overflow-y: auto;
  border-radius: 22px;
  box-shadow: var(--shadow-modal);
  transform: scale(.9) translateY(30px); opacity: 0;
  transition: transform .4s cubic-bezier(.34,1.5,.64,1), opacity .3s ease;
}
#mbg.open .mbox { transform: none; opacity: 1; }

.mhdr {
  position: sticky; top: 0; z-index: 2;
  padding: 20px 22px 16px;
  display: flex; align-items: center; gap: 14px;
  border-bottom: 1px solid var(--glass-border);
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
}
.mthumb {
  width: 54px; height: 54px; border-radius: 12px;
  background: var(--glass-bg); border: 1px solid var(--glass-border);
  display: flex; align-items: center; justify-content: center;
  overflow: hidden; flex-shrink: 0;
  box-shadow: 0 2px 8px rgba(0,0,0,.2) inset;
}
.mthumb img { width: 40px; height: 40px; image-rendering: crisp-edges; object-fit: contain; }
.mtitle { font-size: 1.1rem; font-weight: 700; letter-spacing: -.03em; color: var(--t1); }
.mid { font-size: .7rem; font-family: var(--mono); color: var(--t3); margin-top: 2px; }
.mcls {
  margin-left: auto; width: 30px; height: 30px;
  background: var(--glass-bg); border: 1px solid var(--glass-border);
  border-radius: 50%; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  font-size: .8rem; color: var(--t2); flex-shrink: 0;
  transition: var(--transition);
}
.mcls:hover {
  border-color: var(--red);
  color: var(--red);
  background: var(--red-a);
  transform: rotate(90deg);
}

.mbody { padding: 20px 22px 28px; }

/* Stats */
.mstats {
  display: grid; grid-template-columns: repeat(3,1fr);
  gap: 8px; margin-bottom: 20px;
}
.mst {
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: var(--r-sm); padding: 12px 14px;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  transition: var(--transition);
}
.mst:hover {
  background: var(--glass-bg-hover);
  transform: translateY(-1px);
}
.msl {
  font-size: .62rem; font-weight: 600;
  text-transform: uppercase; letter-spacing: .1em;
  color: var(--t3); margin-bottom: 5px;
}
.msv { font-size: .98rem; font-weight: 700; font-family: var(--mono); letter-spacing: -.02em; color: var(--t1); }
.msv.blue  { color: var(--accent); }
.msv.green { color: var(--green); }
.msv.red   { color: var(--red); }

/* Chart section */
.mchrt-top {
  display: flex; align-items: center; margin-bottom: 10px;
}
.mchrt-title { font-size: .84rem; font-weight: 600; color: var(--t2); }

/* Glass range tabs */
.rtabs {
  display: flex; gap: 3px; margin-left: auto;
  background: var(--glass-bg); border: 1px solid var(--glass-border);
  border-radius: 50px; padding: 3px;
  backdrop-filter: blur(10px);
}
.rtab {
  font-size: .66rem; font-weight: 600; font-family: var(--mono);
  padding: 4px 11px; border-radius: 50px;
  color: var(--t3); cursor: pointer;
  transition: all .2s cubic-bezier(.34,1.4,.64,1);
}
.rtab.on {
  background: var(--accent);
  color: #fff;
  box-shadow: 0 2px 8px var(--accent-a);
  transform: scale(1.04);
}

/* Chart box */
.chrtbox {
  position: relative;
  border-radius: 14px;
  padding: 16px;
  overflow: hidden;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  backdrop-filter: blur(10px);
}
.chrtbox canvas {
  display: block;
  /* Let Chart.js handle DPR â€” don't force CSS sizing */
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOADER â€” Liquid Glass
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#ldr {
  position: fixed; inset: 0; z-index: 9999;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  gap: 18px;
  background: linear-gradient(135deg, var(--bg-a) 0%, var(--bg-b) 50%, var(--bg-c) 100%);
  transition: opacity .5s ease;
}
.ldr-card {
  border-radius: 24px; padding: 32px 40px;
  display: flex; flex-direction: column; align-items: center; gap: 18px;
  box-shadow: var(--shadow-modal);
}
.ldr-gem {
  width: 60px; height: 60px; border-radius: 16px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  display: flex; align-items: center; justify-content: center;
  overflow: hidden;
  animation: ldrFloat 2s ease-in-out infinite;
  box-shadow: 0 0 32px var(--accent-a);
}
.ldr-gem img { width: 42px; height: 42px; image-rendering: crisp-edges; }
@keyframes ldrFloat { 0%,100%{transform:translateY(0) scale(1)} 50%{transform:translateY(-8px) scale(1.04)} }
.ldr-bar {
  width: 180px; height: 3px;
  border-radius: 50px;
  background: var(--glass-bg);
  overflow: hidden;
  border: 1px solid var(--glass-border);
}
.ldr-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--accent), var(--accent2));
  border-radius: 50px;
  animation: ldrFill 2s ease-in-out forwards;
}
@keyframes ldrFill { from{width:0%} to{width:100%} }
.ldr-txt { font-size: .75rem; font-family: var(--mono); color: var(--t3); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (max-width: 700px) {
  .hero { padding: 92px 18px 28px; }
  .content { padding: 16px 18px 80px; }
  .grid { grid-template-columns: repeat(auto-fill, minmax(155px,1fr)); gap: 8px; }
  .mstats { grid-template-columns: 1fr 1fr; }
  .nav-pill { padding: 7px 12px; }
}
</style>
</head>
<body>

<!-- ANIMATED BACKGROUND -->
<div id="bg-canvas"></div>
<div class="orb orb-1"></div>
<div class="orb orb-2"></div>
<div class="orb orb-3"></div>

<!-- LOADER -->
<div id="ldr">
  <div class="ldr-card glass">
    <div class="ldr-gem"><img id="ldr-img" src="" alt=""></div>
    <div class="ldr-bar"><div class="ldr-fill"></div></div>
    <div class="ldr-txt" id="ltxt">Connecting to marketâ€¦</div>
  </div>
</div>

<!-- NAV -->
<div id="nav">
  <div class="nav-pill glass">
    <div class="logo">
      <div class="logo-gem"><img id="nav-logo" src="" alt=""></div>
      <div class="logo-txt">donut<b>market</b>.pro</div>
    </div>
    <div class="nav-search">
      <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>
      </svg>
      <input id="srch" type="text" placeholder="Search itemsâ€¦" autocomplete="off">
    </div>
    <div class="theme-toggle" id="theme-toggle" title="Toggle dark/light mode">
      <span class="tgl-icon" id="tgl-icon-l">â˜€ï¸</span>
      <div class="tgl-track glass" id="tgl-track"></div>
      <span class="tgl-icon" id="tgl-icon-r">ğŸŒ™</span>
    </div>
  </div>
</div>

<!-- HERO -->
<div class="hero">
  <div class="hero-title" id="hero-title">
    <em>DonutSMP</em> Market
  </div>
</div>

<!-- CONTENT -->
<div class="content" id="content"></div>

<!-- MODAL -->
<div id="mbg" onclick="bgClick(event)">
  <div class="mbg-blur"></div>
  <div class="mbox glass" id="mbox">
    <div class="mhdr">
      <div class="mthumb" id="m-thumb"></div>
      <div>
        <div class="mtitle" id="m-title">â€”</div>
        <div class="mid" id="m-id">â€”</div>
      </div>
      <button class="mcls" onclick="closeModal()">âœ•</button>
    </div>
    <div class="mbody">
      <div class="mstats">
        <div class="mst glass"><div class="msl">Lowest Price</div><div class="msv blue" id="m-lp">â€”</div></div>
        <div class="mst glass"><div class="msl">24h Change</div><div class="msv" id="m-chg">â€”</div></div>
        <div class="mst glass"><div class="msl">7d High</div><div class="msv" id="m-7h">â€”</div></div>
        <div class="mst glass"><div class="msl">7d Low</div><div class="msv" id="m-7l">â€”</div></div>
      </div>
      <div class="mchrt-top">
        <div class="mchrt-title">Price History</div>
        <div class="rtabs" id="rtabs">
          <div class="rtab on" data-r="today">Today</div>
          <div class="rtab" data-r="7">7D</div>
          <div class="rtab" data-r="30">30D</div>
          <div class="rtab" data-r="90">90D</div>
        </div>
      </div>
      <div class="chrtbox">
        <canvas id="mchart"></canvas>
      </div>
    </div>
  </div>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONFIG
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const API = 'https://api.donut.auction';
const KEY = 'b2e3944c849c4e5ebc8a25d30d7b733c';

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   WIKI IMAGE MAP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const W = 'https://minecraft.wiki/images/';
const WIKI = {
  'elytra':'Elytra_(item)_JE2_BE2.png','dragon_head':'Dragon_Head_JE1.png',
  'piglin_head':'Piglin_Head_JE1.png','enchanted_golden_apple':'Enchanted_Golden_Apple_JE2_BE2.png',
  'wither_skeleton_skull':'Wither_Skeleton_Skull_JE2_BE2.png','nether_star':'Nether_Star_JE3_BE2.png',
  'beacon':'Beacon_JE3_BE2.png','netherite_ingot':'Netherite_Ingot_JE2_BE1.png',
  'netherite_block':'Block_of_Netherite_JE3_BE2.png','ancient_debris':'Ancient_Debris_JE2_BE1.png',
  'netherite_scrap':'Netherite_Scrap_JE2_BE1.png',
  'netherite_upgrade_smithing_template':'Netherite_Upgrade_Smithing_Template_JE1_BE1.png',
  'redstone':'Redstone_Dust_JE2_BE2.png','hopper':'Hopper_(item)_JE2_BE1.png',
  'iron_ingot':'Iron_Ingot_JE3_BE2.png','bone_block':'Bone_Block_JE3.png',
  'sea_pickle':'Sea_Pickle_JE2_BE1.png','sugar_cane':'Sugar_Cane_JE2_BE2.png',
  'bamboo':'Bamboo_JE2_BE1.png','wheat':'Wheat_JE2_BE2.png','carrot':'Carrot_JE2_BE2.png',
  'potato':'Potato_JE2_BE2.png','nether_wart':'Nether_Wart_JE2_BE2.png',
  'kelp':'Kelp_JE3_BE2.png','cocoa_beans':'Cocoa_Beans_JE3_BE2.png',
  'pumpkin':'Carved_Pumpkin_JE2_BE1.png','melon_slice':'Melon_Slice_JE2_BE2.png',
  'diamond':'Diamond_JE3_BE3.png','diamond_block':'Block_of_Diamond_JE4_BE3.png',
  'emerald':'Emerald_JE3_BE3.png','emerald_block':'Block_of_Emerald_JE3_BE2.png',
  'gold_ingot':'Gold_Ingot_JE4_BE2.png','gold_block':'Block_of_Gold_JE5_BE3.png',
  'raw_gold':'Raw_Gold_JE2_BE1.png','iron_block':'Block_of_Iron_JE4_BE3.png',
  'raw_iron':'Raw_Iron_JE2_BE1.png','copper_ingot':'Copper_Ingot_JE2_BE1.png',
  'raw_copper':'Raw_Copper_JE2_BE1.png','coal':'Coal_JE4_BE3.png',
  'coal_block':'Block_of_Coal_JE5_BE3.png','lapis_lazuli':'Lapis_Lazuli_JE2_BE2.png',
  'lapis_block':'Lapis_Lazuli_Block_JE4_BE3.png','redstone_block':'Block_of_Redstone_JE2_BE1.png',
  'quartz':'Nether_Quartz_JE3_BE2.png','quartz_block':'Block_of_Quartz_JE3_BE3.png',
  'amethyst_shard':'Amethyst_Shard_JE2_BE1.png','amethyst_block':'Block_of_Amethyst_JE2_BE1.png',
  'diamond_sword':'Diamond_Sword_JE3_BE3.png','diamond_pickaxe':'Diamond_Pickaxe_JE3_BE3.png',
  'diamond_axe':'Diamond_Axe_JE3_BE3.png','diamond_chestplate':'Diamond_Chestplate_JE3_BE2.png',
  'diamond_helmet':'Diamond_Helmet_JE3_BE2.png','diamond_leggings':'Diamond_Leggings_JE3_BE2.png',
  'diamond_boots':'Diamond_Boots_JE3_BE2.png','bow':'Bow_(pulling_0)_JE1_BE1.png',
  'crossbow':'Crossbow_JE2_BE1.png','arrow':'Arrow_JE2_BE2.png','trident':'Trident_JE3_BE3.png',
  'shield':'Shield_JE2.png','ender_pearl':'Ender_Pearl_JE3_BE2.png','blaze_rod':'Blaze_Rod_JE2_BE2.png',
  'ghast_tear':'Ghast_Tear_JE2_BE2.png','magma_cream':'Magma_Cream_JE3_BE2.png',
  'cobblestone':'Cobblestone_JE2_BE2.png','stone':'Stone_JE5.png',
  'smooth_stone':'Smooth_Stone_JE2_BE2.png','stone_bricks':'Stone_Bricks_JE2_BE2.png',
  'obsidian':'Obsidian_JE2_BE2.png','crying_obsidian':'Crying_Obsidian_JE2_BE1.png',
  'oak_log':'Oak_Log_(item)_JE4_BE2.png','oak_planks':'Oak_Planks_JE5_BE4.png',
  'glass':'Glass_JE4_BE2.png','glowstone':'Glowstone_JE4_BE2.png',
  'sea_lantern':'Sea_Lantern_JE2_BE2.png','sand':'Sand_JE2_BE2.png',
  'gravel':'Gravel_JE4_BE4.png','tuff':'Tuff_JE3_BE3.png',
  'deepslate':'Deepslate_JE2.png','blackstone':'Blackstone_JE1_BE1.png',
  'netherrack':'Netherrack_JE4_BE2.png','nether_bricks':'Nether_Bricks_JE2_BE2.png',
  'purpur_block':'Purpur_Block_JE2_BE1.png','piston':'Piston_(item)_JE3_BE3.png',
  'observer':'Observer_JE4_BE3.png','comparator':'Redstone_Comparator_JE2_BE2.png',
  'repeater':'Redstone_Repeater_JE4_BE1.png','dispenser':'Dispenser_JE2_BE2.png',
  'dropper':'Dropper_JE2_BE2.png','furnace':'Furnace_JE3_BE3.png',
  'blast_furnace':'Blast_Furnace_JE2_BE2.png','brewing_stand':'Brewing_Stand_(item)_JE2_BE2.png',
  'enchanting_table':'Enchanting_Table_JE4_BE2.png','ender_chest':'Ender_Chest_(item)_JE3_BE3.png',
  'shulker_box':'Shulker_Box_JE2_BE2.png','anvil':'Anvil_(item)_JE2_BE2.png',
  'heart_of_the_sea':'Heart_of_the_Sea_JE2_BE2.png','echo_shard':'Echo_Shard_JE1_BE1.png',
  'mace':'Mace_JE1.png','heavy_core':'Heavy_Core_JE1.png','breeze_rod':'Breeze_Rod_JE1.png',
  'wind_charge':'Wind_Charge_JE1.png','trial_key':'Trial_Key_JE1.png',
  'ominous_trial_key':'Ominous_Trial_Key_JE1.png','ominous_bottle':'Ominous_Bottle_JE1.png',
  'armadillo_scute':'Armadillo_Scute_JE1.png','leather':'Leather_JE4_BE2.png',
  'string':'String_JE6_BE3.png','gunpowder':'Gunpowder_JE3_BE3.png',
  'shulker_shell':'Shulker_Shell_JE2_BE1.png','phantom_membrane':'Phantom_Membrane_JE1_BE1.png',
  'nautilus_shell':'Nautilus_Shell_JE1_BE1.png','prismarine_shard':'Prismarine_Shard_JE2_BE2.png',
  'prismarine_crystals':'Prismarine_Crystals_JE2_BE2.png','ink_sac':'Ink_Sac_JE2_BE2.png',
  'glow_ink_sac':'Glow_Ink_Sac_JE1_BE1.png','bone':'Bone_JE2_BE2.png',
  'bone_meal':'Bone_Meal_JE2_BE2.png','rotten_flesh':'Rotten_Flesh_JE3_BE2.png',
  'spider_eye':'Spider_Eye_JE3_BE2.png','fermented_spider_eye':'Fermented_Spider_Eye_JE3_BE2.png',
  'feather':'Feather_JE3_BE2.png','name_tag':'Name_Tag_JE3_BE2.png','saddle':'Saddle_JE3_BE2.png',
  'lead':'Lead_JE2_BE2.png','tnt':'TNT_(item)_JE2_BE1.png','sponge':'Sponge_JE2_BE2.png',
  'slime_ball':'Slimeball_JE3_BE2.png','eye_of_ender':'Eye_of_Ender_JE2_BE2.png',
  'golden_carrot':'Golden_Carrot_JE2_BE2.png','golden_apple':'Golden_Apple_JE2_BE2.png',
  'apple':'Apple_JE2_BE2.png','bread':'Bread_JE2_BE2.png','cooked_beef':'Cooked_Beef_JE2_BE2.png',
  'cooked_porkchop':'Cooked_Porkchop_JE2_BE2.png','cooked_chicken':'Cooked_Chicken_JE2_BE2.png',
  'honey_bottle':'Honey_Bottle_JE2_BE1.png','honeycomb':'Honeycomb_JE2_BE1.png',
  'paper':'Paper_JE2_BE2.png','book':'Book_JE2_BE2.png','glass_bottle':'Glass_Bottle_JE2_BE2.png',
  'fire_charge':'Fire_Charge_JE2_BE2.png','chorus_fruit':'Chorus_Fruit_JE2_BE1.png',
  'scute':'Scute_JE1_BE1.png','iron_sword':'Iron_Sword_JE2_BE2.png',
  'iron_pickaxe':'Iron_Pickaxe_JE3_BE3.png','iron_helmet':'Iron_Helmet_JE3_BE2.png',
  'iron_chestplate':'Iron_Chestplate_JE3_BE2.png',
};
function imgSrc(id){ return WIKI[id]?W+WIKI[id]:`https://mc-heads.net/item/${id}`; }
function imgFb(id){  return WIKI[id]?`https://mc-heads.net/item/${id}`:null; }
function mkImg(id,sz=34){
  const s=imgSrc(id), fb=imgFb(id);
  const err=fb?`this.src='${fb}';this.onerror=()=>{this.style.opacity='.3'}`:`this.style.opacity='.3'`;
  return `<img src="${s}" width="${sz}" height="${sz}" style="image-rendering:crisp-edges;object-fit:contain" onerror="${err}" alt="">`;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ITEM CATALOG
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const CATALOG = [
  ['elytra','Elytra',269552435,'popular'],['dragon_head','Dragon Head',26323901,'popular'],
  ['piglin_head','Piglin Head',7519080,'popular'],['enchanted_golden_apple','Enchanted Golden Apple',656919,'popular'],
  ['wither_skeleton_skull','Wither Skull',1200000,'popular'],['nether_star','Nether Star',3500000,'popular'],
  ['beacon','Beacon',5200000,'popular'],
  ['netherite_ingot','Netherite Ingot',5017647,'netherite'],['netherite_block','Block of Netherite',41905697,'netherite'],
  ['ancient_debris','Ancient Debris',1693703,'netherite'],['netherite_scrap','Netherite Scrap',890000,'netherite'],
  ['netherite_upgrade_smithing_template','Netherite Upgrade Template',850000,'netherite'],
  ['redstone','Redstone Dust',789,'sold'],['hopper','Hopper',6483,'sold'],
  ['iron_ingot','Iron Ingot',857,'sold'],['cobblestone','Cobblestone',12,'sold'],
  ['oak_log','Oak Log',89,'sold'],['gunpowder','Gunpowder',420,'sold'],
  ['string','String',150,'sold'],['leather','Leather',280,'sold'],
  ['iron_sword','Iron Sword',420,'sold'],['iron_pickaxe','Iron Pickaxe',380,'sold'],
  ['bone_block','Bone Block',46869,'farming'],['sea_pickle','Sea Pickle',177,'farming'],
  ['sugar_cane','Sugar Cane',790,'farming'],['bamboo','Bamboo',147,'farming'],
  ['wheat','Wheat',112,'farming'],['carrot','Carrot',89,'farming'],
  ['potato','Potato',76,'farming'],['nether_wart','Nether Wart',220,'farming'],
  ['kelp','Kelp',42,'farming'],['cocoa_beans','Cocoa Beans',310,'farming'],
  ['pumpkin','Pumpkin',145,'farming'],['melon_slice','Melon Slice',62,'farming'],
  ['honeycomb','Honeycomb',580,'farming'],['honey_bottle','Honey Bottle',620,'farming'],
  ['diamond','Diamond',18500,'ores'],['diamond_block','Diamond Block',1184000,'ores'],
  ['emerald','Emerald',4200,'ores'],['emerald_block','Block of Emerald',268800,'ores'],
  ['gold_ingot','Gold Ingot',890,'ores'],['gold_block','Block of Gold',56960,'ores'],
  ['raw_gold','Raw Gold',650,'ores'],['iron_block','Block of Iron',48192,'ores'],
  ['raw_iron','Raw Iron',320,'ores'],['copper_ingot','Copper Ingot',28,'ores'],
  ['raw_copper','Raw Copper',18,'ores'],['coal','Coal',48,'ores'],
  ['coal_block','Block of Coal',3072,'ores'],['lapis_lazuli','Lapis Lazuli',210,'ores'],
  ['lapis_block','Lapis Lazuli Block',13440,'ores'],['redstone_block','Block of Redstone',44608,'ores'],
  ['quartz','Nether Quartz',180,'ores'],['quartz_block','Block of Quartz',11520,'ores'],
  ['amethyst_shard','Amethyst Shard',340,'ores'],['amethyst_block','Block of Amethyst',21760,'ores'],
  ['diamond_sword','Diamond Sword',5800,'combat'],['diamond_pickaxe','Diamond Pickaxe',5200,'combat'],
  ['diamond_axe','Diamond Axe',4800,'combat'],['diamond_chestplate','Diamond Chestplate',18500,'combat'],
  ['diamond_helmet','Diamond Helmet',12000,'combat'],['diamond_leggings','Diamond Leggings',15000,'combat'],
  ['diamond_boots','Diamond Boots',9800,'combat'],['bow','Bow',620,'combat'],
  ['crossbow','Crossbow',1200,'combat'],['arrow','Arrow',38,'combat'],
  ['trident','Trident',45000,'combat'],['shield','Shield',890,'combat'],
  ['ender_pearl','Ender Pearl',680,'combat'],['blaze_rod','Blaze Rod',750,'combat'],
  ['ghast_tear','Ghast Tear',1800,'combat'],['magma_cream','Magma Cream',420,'combat'],
  ['eye_of_ender','Eye of Ender',1800,'combat'],
  ['stone','Stone',15,'building'],['smooth_stone','Smooth Stone',22,'building'],
  ['stone_bricks','Stone Bricks',38,'building'],['obsidian','Obsidian',120,'building'],
  ['crying_obsidian','Crying Obsidian',450,'building'],['oak_planks','Oak Planks',28,'building'],
  ['glass','Glass',32,'building'],['glowstone','Glowstone',380,'building'],
  ['sea_lantern','Sea Lantern',290,'building'],['sand','Sand',45,'building'],
  ['gravel','Gravel',38,'building'],['tuff','Tuff',48,'building'],
  ['deepslate','Deepslate',68,'building'],['netherrack','Netherrack',18,'building'],
  ['nether_bricks','Nether Bricks',120,'building'],['purpur_block','Purpur Block',85,'building'],
  ['blackstone','Blackstone',75,'building'],
  ['piston','Piston',580,'redstone'],['observer','Observer',480,'redstone'],
  ['comparator','Redstone Comparator',380,'redstone'],['repeater','Redstone Repeater',280,'redstone'],
  ['dispenser','Dispenser',580,'redstone'],['dropper','Dropper',320,'redstone'],
  ['furnace','Furnace',180,'redstone'],['blast_furnace','Blast Furnace',2800,'redstone'],
  ['brewing_stand','Brewing Stand',2400,'redstone'],['enchanting_table','Enchanting Table',18500,'redstone'],
  ['ender_chest','Ender Chest',12000,'redstone'],['shulker_box','Shulker Box',5200,'redstone'],
  ['anvil','Anvil',4800,'redstone'],
  ['heart_of_the_sea','Heart of the Sea',120000,'rare'],['echo_shard','Echo Shard',15000,'rare'],
  ['mace','Mace',180000,'rare'],['heavy_core','Heavy Core',950000,'rare'],
  ['breeze_rod','Breeze Rod',28000,'rare'],['wind_charge','Wind Charge',1200,'rare'],
  ['trial_key','Trial Key',4500,'rare'],['ominous_trial_key','Ominous Trial Key',18000,'rare'],
  ['ominous_bottle','Ominous Bottle',3200,'rare'],['armadillo_scute','Armadillo Scute',2800,'rare'],
  ['mending_book','Mending',38000,'books'],['sharpness_v_book','Sharpness V',28000,'books'],
  ['protection_iv_book','Protection IV',22000,'books'],['efficiency_v_book','Efficiency V',18000,'books'],
  ['fortune_iii_book','Fortune III',45000,'books'],['silk_touch_book','Silk Touch',32000,'books'],
  ['looting_iii_book','Looting III',15000,'books'],['unbreaking_iii_book','Unbreaking III',8000,'books'],
  ['infinity_book','Infinity',55000,'books'],['flame_book','Flame',7200,'books'],
  ['power_v_book','Power V',25000,'books'],['swift_sneak_iii_book','Swift Sneak III',380000,'books'],
  ['soul_speed_iii_book','Soul Speed III',125000,'books'],['density_v_book','Density V',38000,'books'],
  ['breach_iv_book','Breach IV',32000,'books'],['wind_burst_iii_book','Wind Burst III',28000,'books'],
  ['apple','Apple',65,'misc'],['bread','Bread',120,'misc'],['cooked_beef','Steak',280,'misc'],
  ['cooked_porkchop','Cooked Porkchop',260,'misc'],['cooked_chicken','Cooked Chicken',220,'misc'],
  ['golden_apple','Golden Apple',4800,'misc'],['golden_carrot','Golden Carrot',2200,'misc'],
  ['bone','Bone',95,'misc'],['bone_meal','Bone Meal',68,'misc'],['rotten_flesh','Rotten Flesh',22,'misc'],
  ['glass_bottle','Glass Bottle',28,'misc'],['paper','Paper',22,'misc'],['book','Book',65,'misc'],
  ['name_tag','Name Tag',2800,'misc'],['saddle','Saddle',4800,'misc'],['lead','Lead',680,'misc'],
  ['tnt','TNT',380,'misc'],['sponge','Sponge',8500,'misc'],['shulker_shell','Shulker Shell',4800,'misc'],
  ['phantom_membrane','Phantom Membrane',2200,'misc'],['nautilus_shell','Nautilus Shell',8500,'misc'],
  ['prismarine_shard','Prismarine Shard',320,'misc'],['prismarine_crystals','Prismarine Crystals',380,'misc'],
  ['ink_sac','Ink Sac',180,'misc'],['glow_ink_sac','Glow Ink Sac',480,'misc'],
  ['feather','Feather',95,'misc'],['slime_ball','Slimeball',320,'misc'],
  ['spider_eye','Spider Eye',95,'misc'],['fire_charge','Fire Charge',450,'misc'],
  ['chorus_fruit','Chorus Fruit',95,'misc'],['scute','Scute',1800,'misc'],
];
const _s=new Set();
const ITEMS=CATALOG.filter(([id])=>{if(_s.has(id))return false;_s.add(id);return true;});
const SECTIONS=[
  {key:'popular',label:'Popular Investments'},{key:'netherite',label:'Netherite'},
  {key:'sold',label:'Most Sold'},{key:'farming',label:'Farming Items'},
  {key:'ores',label:'Ores & Minerals'},{key:'combat',label:'Combat'},
  {key:'building',label:'Building Blocks'},{key:'redstone',label:'Redstone & Tech'},
  {key:'rare',label:'Rare & 1.21'},{key:'books',label:'Enchanted Books'},
  {key:'misc',label:'Food & Misc'},
];

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FORMATTERS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function fmtP(n){
  if(!n||isNaN(n)||n===0)return'â€”';n=+n;
  if(n>=1e9)return'$'+(n/1e9).toFixed(3).replace(/\.?0+$/,'')+'B';
  if(n>=1e6)return'$'+(n/1e6).toFixed(2).replace(/\.?0+$/,'')+'M';
  if(n>=1000)return'$'+Math.round(n).toLocaleString('en-US');
  if(n>=1)return'$'+n.toLocaleString('en-US',{maximumFractionDigits:2});
  return'$'+n.toFixed(4);
}
function fmtK(n){
  n=+n;
  if(n>=1e9)return(n/1e9).toFixed(2)+'B';
  if(n>=1e6)return(n/1e6).toFixed(1)+'M';
  if(n>=1000)return(n/1e3).toFixed(0)+'K';
  return Math.round(n).toLocaleString('en-US');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SEEDED RNG
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function srng(s){
  let h=2166136261;
  for(let i=0;i<s.length;i++)h=(h^s.charCodeAt(i))*16777619|0;
  h=h>>>0;
  return()=>{h^=h<<13;h^=h>>>17;h^=h<<5;h=h>>>0;return h/4294967296};
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PRICE HISTORY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function genHist(base,n,step,seed){
  const rng=srng(seed);
  let p=base*(0.92+rng()*.16);
  const now=Date.now();
  return Array.from({length:n+1},(_,i)=>{
    p=Math.max(p+(rng()-.48)*.022*p,0.01);
    return{t:new Date(now-(n-i)*step),y:Math.round(p*100)/100};
  });
}
const H={
  today:(b,id)=>genHist(b,24,3600000,id+'T'),
  '7':  (b,id)=>genHist(b,28,6*3600000,id+'7'),
  '30': (b,id)=>genHist(b,30,86400000,id+'30'),
  '90': (b,id)=>genHist(b,90,86400000,id+'90'),
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let allOrders={}, orderMin={}, auctionMin={}, lowestMap={}, srcMap={};
let sparkMap={}, mChart=null, mId=null, searchQ='';
let isDark = true;

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   THEME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function setTheme(dark){
  isDark=dark;
  document.documentElement.setAttribute('data-theme', dark?'dark':'light');
  // Redraw active chart on theme change
  if(mChart && mId){ requestAnimationFrame(()=>drawModalChart(mId, document.querySelector('.rtab.on')?.dataset.r||'today')); }
}
document.getElementById('theme-toggle').addEventListener('click',()=>{
  gsap.to('.tgl-track::before',{duration:.3,ease:'back.out(1.4)'});
  setTheme(!isDark);
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   API
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function fetchOrders(cursor=null){
  try{
    const url=new URL(`${API}/orders`);
    if(cursor)url.searchParams.set('cursor',cursor);
    const r=await fetch(url,{headers:{'x-api-key':KEY}});
    if(!r.ok)return;
    const d=await r.json();
    (d.orders||[]).forEach(o=>{
      const id=o.item?.itemId||o.itemId;
      const p=+o.itemPrice;
      if(id&&p>0&&(!orderMin[id]||p<orderMin[id]))orderMin[id]=p;
    });
    if(d.nextCursor)await fetchOrders(d.nextCursor);
  }catch(e){console.warn(e.message);}
}
async function fetchAuctions(){
  for(const path of['/auctions','/v1/auctions','/v1/items','/auction']){
    try{
      const r=await fetch(API+path,{headers:{'x-api-key':KEY}});
      if(!r.ok)continue;
      const d=await r.json();
      const arr=d.auctions||d.items||d.data||d||[];
      if(Array.isArray(arr)&&arr.length>0){
        arr.forEach(a=>{
          const id=a.itemId||a.item?.itemId;
          const p=+(a.price||a.itemPrice||a.pricePerItem||0);
          if(id&&p>0&&(!auctionMin[id]||p<auctionMin[id]))auctionMin[id]=p;
        });
        break;
      }
    }catch(e){}
  }
}
function buildMaps(){
  ITEMS.forEach(([id,,fb])=>{
    const a=auctionMin[id],o=orderMin[id];
    if(a&&o){lowestMap[id]=Math.min(a,o);srcMap[id]='both';}
    else if(a){lowestMap[id]=a;srcMap[id]='auction';}
    else if(o){lowestMap[id]=o;srcMap[id]='order';}
    else{lowestMap[id]=fb||0;srcMap[id]='est';}
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SPARKLINE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function drawSpark(cid, id, base){
  if(sparkMap[cid]){try{sparkMap[cid].destroy()}catch(e){}}
  const el=document.getElementById(cid);if(!el)return;
  const pts=H.today(base||1,id);
  const up=pts[pts.length-1].y>=pts[0].y;
  const col=up?'#34d399':'#f87171';
  sparkMap[cid]=new Chart(el,{
    type:'line',
    data:{
      labels:pts.map(p=>p.t),
      datasets:[{
        data:pts.map(p=>p.y),
        borderColor:col,borderWidth:1.5,fill:true,
        backgroundColor:ctx=>{
          const g=ctx.chart.ctx.createLinearGradient(0,0,0,32);
          g.addColorStop(0,col+'30');g.addColorStop(1,col+'00');return g;
        },
        pointRadius:0,tension:0.4
      }]
    },
    options:{
      responsive:false,animation:false,
      plugins:{legend:{display:false},tooltip:{enabled:false}},
      scales:{x:{display:false},y:{display:false}}
    }
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODAL CHART â€” crisp, interactive, beautiful
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function drawModalChart(id, range){
  if(mChart){try{mChart.destroy()}catch(e){}}
  const base=lowestMap[id]||ITEMS.find(i=>i[0]===id)?.[2]||100;
  const aBase=auctionMin[id]||base;
  const oBase=orderMin[id]||base*.95;
  const fn=H[range]||H.today;
  const aDat=fn(aBase,id+'a');
  const oDat=fn(oBase,id+'o');

  let fmtL;
  if(range==='today') fmtL=d=>d.toLocaleTimeString('en',{hour:'2-digit',minute:'2-digit'});
  else if(+range<=7)  fmtL=d=>d.toLocaleDateString('en',{weekday:'short',month:'short',day:'numeric'});
  else if(+range<=30) fmtL=d=>d.toLocaleDateString('en',{month:'short',day:'numeric'});
  else                fmtL=d=>d.toLocaleDateString('en',{month:'short',year:'2-digit'});

  const el=document.getElementById('mchart');
  if(!el)return;

  // Fix blurry canvas: size canvas to its container
  const box=el.parentElement;
  const W=box.clientWidth-32; const H_px=180;
  const dpr=window.devicePixelRatio||1;
  el.width=W*dpr; el.height=H_px*dpr;
  el.style.width=W+'px'; el.style.height=H_px+'px';

  const dark=isDark;
  const gridCol= dark?'rgba(255,255,255,.06)':'rgba(0,0,0,.06)';
  const tickCol= dark?'rgba(255,255,255,.35)':'rgba(0,0,0,.4)';
  const tipBg  = dark?'rgba(12,15,30,.95)':'rgba(255,255,255,.96)';
  const tipBdr = dark?'rgba(255,255,255,.12)':'rgba(200,210,230,.8)';
  const tipTxt = dark?'rgba(255,255,255,.9)':'rgba(10,15,35,.9)';
  const accent =dark?'#3b82f6':'#2563eb';
  const gold   =dark?'#fbbf24':'#d97706';

  mChart=new Chart(el,{
    type:'line',
    data:{
      labels:aDat.map(d=>fmtL(d.t)),
      datasets:[
        {
          label:'Auction',
          data:aDat.map(d=>d.y),
          borderColor:gold,borderWidth:2.5,fill:false,tension:.4,
          pointRadius:0,pointHoverRadius:5,
          pointHoverBackgroundColor:gold,
          pointHoverBorderColor:dark?'rgba(12,15,30,.9)':'rgba(255,255,255,.9)',
          pointHoverBorderWidth:2,
        },
        {
          label:'Order',
          data:oDat.map(d=>d.y),
          borderColor:accent,borderWidth:2.5,fill:false,tension:.4,
          pointRadius:0,pointHoverRadius:5,
          pointHoverBackgroundColor:accent,
          pointHoverBorderColor:dark?'rgba(12,15,30,.9)':'rgba(255,255,255,.9)',
          pointHoverBorderWidth:2,
        }
      ]
    },
    options:{
      responsive:false,
      devicePixelRatio:dpr,
      interaction:{mode:'index',intersect:false},
      animation:{duration:500,easing:'easeOutQuart'},
      plugins:{
        legend:{
          display:true,position:'top',align:'end',
          labels:{
            color:tickCol,
            font:{family:'-apple-system,BlinkMacSystemFont,"SF Pro Text",system-ui,sans-serif',size:11,weight:'500'},
            boxWidth:8,boxHeight:8,
            padding:16,
            usePointStyle:true,
            pointStyle:'circle',
          }
        },
        tooltip:{
          enabled:true,
          backgroundColor:tipBg,
          borderColor:tipBdr, borderWidth:1,
          padding:{top:10,right:14,bottom:10,left:14},
          cornerRadius:10,
          titleColor:dark?'rgba(255,255,255,.5)':'rgba(0,0,0,.45)',
          titleFont:{family:'-apple-system,BlinkMacSystemFont,system-ui',size:10,weight:'500'},
          bodyColor:tipTxt,
          bodyFont:{family:'-apple-system,BlinkMacSystemFont,system-ui',size:12,weight:'600'},
          caretPadding:8,
          boxPadding:4,
          callbacks:{label:c=>` ${c.dataset.label}: ${fmtP(c.raw)}`},
          displayColors:true,
        }
      },
      scales:{
        x:{
          grid:{color:gridCol,drawBorder:false,lineWidth:1},
          ticks:{
            color:tickCol,
            font:{family:'-apple-system,BlinkMacSystemFont,system-ui',size:10,weight:'400'},
            maxRotation:0,maxTicksLimit:8,padding:6
          },
          border:{display:false}
        },
        y:{
          grid:{color:gridCol,drawBorder:false,lineWidth:1},
          ticks:{
            color:tickCol,
            font:{family:'-apple-system,BlinkMacSystemFont,system-ui',size:10,weight:'400'},
            callback:v=>fmtK(v), padding:8
          },
          border:{display:false}
        }
      }
    },
    plugins:[{
      id:'crosshair',
      afterDraw(chart){
        if(chart.tooltip._active?.length){
          const ctx=chart.ctx;
          const x=chart.tooltip._active[0].element.x;
          const {top,bottom}=chart.chartArea;
          ctx.save();
          ctx.beginPath();
          ctx.moveTo(x,top); ctx.lineTo(x,bottom);
          ctx.strokeStyle=dark?'rgba(255,255,255,.15)':'rgba(0,0,50,.1)';
          ctx.lineWidth=1; ctx.setLineDash([4,4]);
          ctx.stroke(); ctx.restore();
        }
      }
    }]
  });
  el.style.cursor='crosshair';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RENDER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function render(){
  const ct=document.getElementById('content');
  const q=searchQ.trim().toLowerCase();
  ct.innerHTML='';

  if(q){
    const found=ITEMS.filter(([id,name])=>name.toLowerCase().includes(q)||id.includes(q));
    if(found.length) renderSection(ct,'Search Results','search',found);
    else ct.innerHTML=`<div style="text-align:center;color:var(--t3);padding:60px 0;font-size:.9rem">No items found for "${q}"</div>`;
    return;
  }
  SECTIONS.forEach(({key,label})=>{
    const items=ITEMS.filter(i=>i[3]===key);
    if(items.length) renderSection(ct,label,key,items);
  });
}

function renderSection(parent,label,key,items){
  const wrap=document.createElement('div');
  wrap.innerHTML=`<div class="sec-hdr"><div class="sec-name">${label}</div><div class="sec-ct">${items.length}</div></div><div class="grid" id="g-${key}"></div>`;
  parent.appendChild(wrap);
  const grid=wrap.querySelector('.grid');

  items.forEach(([id,name,,sec],idx)=>{
    const p=lowestMap[id]||0;
    const src=srcMap[id]||'est';
    const rng=srng(id+'chg');
    const chg=(rng()-.47)*.09;
    const cc=chg>.005?'up':chg<-.005?'dn':'fl';
    const cs=(chg>=0?'+':'')+(chg*100).toFixed(1)+'%';
    const sid=`sp-${key}-${idx}`;

    const card=document.createElement('div');
    card.className='card glass';
    card.innerHTML=`
      <div class="card-top">
        <div class="cimg">${mkImg(id,34)}</div>
        <div style="min-width:0">
          <div class="cname">${name}</div>
          <div class="cid">${id}</div>
        </div>
      </div>
      <div class="cprice">${p>0?fmtP(p):'â€”'}</div>
      <div class="cp64">x64 <b>${p>0?fmtP(p*64):'â€”'}</b></div>
      <div class="sp-wrap"><canvas id="${sid}"></canvas></div>
      <div class="cbot">
        <div class="cchg ${cc}">${cc==='up'?'â–²':cc==='dn'?'â–¼':'â€”'} ${cs}</div>
        <div class="csrc">
          ${src==='auction'||src==='both'?'<span class="spill a">A</span>':''}
          ${src==='order'||src==='both'?'<span class="spill o">O</span>':''}
          ${src==='est'?'<span class="spill e">est</span>':''}
        </div>
      </div>`;
    grid.appendChild(card);
    card.addEventListener('click',()=>openModal(id));
    setTimeout(()=>drawSpark(sid,id,p||1),idx*4+50);
  });

  // Section header reveal
  const hdr=wrap.querySelector('.sec-hdr');
  gsap.to(hdr,{opacity:1,y:0,duration:.5,ease:'power2.out',
    scrollTrigger:{trigger:hdr,start:'top 90%',once:true}});

  // Cards stagger
  gsap.fromTo(grid.children,
    {opacity:0,y:22,scale:.97},
    {opacity:1,y:0,scale:1,duration:.45,stagger:.015,ease:'back.out(1.2)',
      scrollTrigger:{trigger:grid,start:'top 92%',once:true}});
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function openModal(id){
  mId=id;
  const item=ITEMS.find(i=>i[0]===id);if(!item)return;
  const[,name,fb]=item;
  const p=lowestMap[id]||0;

  document.getElementById('m-thumb').innerHTML=mkImg(id,40);
  document.getElementById('m-title').textContent=name;
  document.getElementById('m-id').textContent=id;
  document.getElementById('m-lp').textContent=p>0?fmtP(p):'â€”';

  const rng=srng(id+'m');
  const chg=(rng()-.46)*.12;
  const cel=document.getElementById('m-chg');
  cel.textContent=(chg>=0?'+':'')+(chg*100).toFixed(2)+'%';
  cel.className='msv '+(chg>.005?'green':chg<-.005?'red':'');

  const h7=H['7'](p||1,id);
  const vals=h7.map(d=>d.y);
  document.getElementById('m-7h').textContent=fmtP(Math.max(...vals));
  document.getElementById('m-7l').textContent=fmtP(Math.min(...vals));

  document.querySelectorAll('#rtabs .rtab').forEach(t=>{
    t.classList.toggle('on',t.dataset.r==='today');
    t.onclick=()=>{
      document.querySelectorAll('#rtabs .rtab').forEach(x=>x.classList.remove('on'));
      t.classList.add('on');
      gsap.fromTo(t,{scale:.9},{scale:1,duration:.25,ease:'back.out(1.8)'});
      requestAnimationFrame(()=>drawModalChart(id,t.dataset.r));
    };
  });

  const bg=document.getElementById('mbg');
  bg.style.display='flex';
  document.body.style.overflow='hidden';
  requestAnimationFrame(()=>drawModalChart(id,'today'));

  // Stagger modal stats in
  gsap.fromTo('.mst',
    {opacity:0,y:12,scale:.95},
    {opacity:1,y:0,scale:1,duration:.4,stagger:.06,ease:'back.out(1.4)',delay:.15});

  bg.classList.add('open');
}

function closeModal(){
  const bg=document.getElementById('mbg');
  gsap.to('#mbox',{scale:.93,y:20,opacity:0,duration:.25,ease:'power2.in',
    onComplete:()=>{bg.style.display='none';bg.classList.remove('open');document.body.style.overflow=''}});
  const bblur=bg.querySelector('.mbg-blur');
  gsap.to(bblur,{background:'rgba(0,0,0,0)',backdropFilter:'blur(0px)',duration:.28,ease:'power2.in'});
}
function bgClick(e){if(e.target===document.getElementById('mbg')||e.target.classList.contains('mbg-blur'))closeModal();}
document.addEventListener('keydown',e=>{if(e.key==='Escape')closeModal();});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SEARCH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let sT;
document.getElementById('srch').addEventListener('input',e=>{
  clearTimeout(sT);
  sT=setTimeout(()=>{searchQ=e.target.value;render();},160);
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ENTRANCE ANIMATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function animEntrance(){
  gsap.registerPlugin(ScrollTrigger);
  gsap.set(['#nav','.hero','.content'],{opacity:0});
  gsap.set('.orb',{opacity:0});

  const tl=gsap.timeline({delay:.05});
  tl.to('.orb',     {opacity:1,duration:1.2,stagger:.2,ease:'power1.out'})
    .to('#nav',     {opacity:1,y:0,duration:.6,ease:'power3.out'},'-=.8')
    .fromTo('#nav', {y:-20},   {y:0,duration:.6,ease:'power3.out'},'<')
    .to('.hero',    {opacity:1,duration:.55,ease:'power2.out'},'-=.4')
    .fromTo('.hero-title',{y:30,opacity:0},{y:0,opacity:1,duration:.7,ease:'back.out(1.4)'},'<')
    .to('.content', {opacity:1,duration:.4},'-=.2');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOGO IMAGES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function setLogoImgs(){
  const src=imgSrc('elytra');
  document.getElementById('nav-logo').src=src;
  document.getElementById('ldr-img').src=src;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
(async()=>{
  setLogoImgs();
  document.getElementById('ltxt').textContent='Fetching ordersâ€¦';
  await fetchOrders();
  document.getElementById('ltxt').textContent='Fetching auctionsâ€¦';
  await fetchAuctions();
  buildMaps();
  document.getElementById('ltxt').textContent='Renderingâ€¦';
  render();
  animEntrance();
  gsap.to('#ldr',{opacity:0,duration:.5,delay:.5,ease:'power2.in',onComplete:()=>document.getElementById('ldr').remove()});
})();
</script>
</body>
</html>
